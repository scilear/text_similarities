Microsoft (NASDAQ:MSFT) knows that making Windows 10 the operating system of choice in China will be an uphill battle, so it's teaming up with Baidu (NASDAQ:BIDU) for a promotional push.

Microsoft announced a partnership with Baidu where China's leading search engine will become the default homepage and search for Windows 10's Microsoft Edge browser. Baidu will also deliver Windows 10 applications for search, video, cloud, and maps.

It's not just Baidu getting something out of this partnership. Baidu will be nudging visitors to the new Baidu Windows 10 Express distribution channel that lets Chinese users download the Windows 10 experience.

It's easy to see why Microsoft chose Baidu. Microsoft may be boasting about having 10 million devices running Windows 10 in China so early in the new platform's tenure, but that's actually less than 1% of the country's population. It's also a far cry from Baidu, with its more than 600 million active users.

This doesn't mean that Baidu can deliver all of those active users to Microsoft's distribution hub. More than half of Baidu's revenue and traffic is stemming from mobile users, where Android and iOS are the operating systems of choice. Many mobile users in China may never own a PC in their lifetimes.

However, if you pull up stock charts for both companies, Baidu may be the one you may feel is in trouble. The stock has plunged 42% in 2015, far worse than the pedestrian 6% dip in shares of Microsoft.

Baidu investors have been tested as the former dot-com darling throws itself into online-to-offline -- or O2O -- initiatives. The push hasn't gotten in the way of Baidu's resilient top-line gains, but it's a different story on the bottom line. Analysts have been scaling back their profit forecasts as margins contract, scaring away some growth investors that lean on traditional earnings growth to separate the darlings from the duds.

Microsoft is also in a funk. Analysts see revenue declining this year, something that hasn't happened since fiscal 2009 according to S&P Capital IQ data. Making matters worse, that dip was the result of the global recession that temporarily slowed spending. These days it's a global shift away from the PC to mobile that's weighing on results. As far as operating systems go, we're talking about going from the PC market that Microsoft dominates to the mobile market where it's a distant third.

A lot is riding on Windows 10 to breathe new life into Microsoft's flagship business, and improving its chances of success in China as it's doing with this deal can only help.